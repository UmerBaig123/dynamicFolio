{% extends 'base.html' %} {% block title %} {{full_name}} {% endblock title%}
{%load static %} {% block content %} {% comment %} container with 93% width
{%endcomment %}
<!-- <div id="root" style="z-index: -1; position: absolute; top: 0; right: 0"></div> -->
<div class="container">
  <div class="profile-container">
    {% if animation is True %}
    <div class="intro">
      <div class="name">
        <div
          class="first_name"
          style="animation: 1s ease-out 0s 1 slideInLeftFirst"
        >
          {{userdata.first_name}}
        </div>
        <div
          class="last_name"
          style="animation: 1s ease-out 0s 1 slideInLeftSecond"
        >
          {{userdata.last_name}}
        </div>
      </div>
      {% comment %} link to socials {% endcomment %}
      <div class="links" style="animation: 1s ease-out 0s 1 slideInLeftThird">
        <a href="{{userdata.linkedin_url}}" target="_blank"
          ><img
            class="link-image"
            src="{% static 'photos/linkedin.png' %}"
            alt="linkedin"
        /></a>
        <a
          href="https://github.com/{{userdata.github_username}}"
          target="_blank"
          ><svg
            fill="#666666"
            xmlns="http://www.w3.org/2000/svg"
            data-name="Layer 1"
            viewBox="0 0 24 24"
            class="link-image git-svg"
            id="github"
          >
            <path
              d="M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"
            ></path></svg
        ></a>
        <a href="mailto:{{userdata.email_address}}"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            x="0px"
            y="0px"
            class="link-image"
            viewBox="0 0 48 48"
          >
            <path
              fill="#4caf50"
              d="M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"
            ></path>
            <path
              fill="#1e88e5"
              d="M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"
            ></path>
            <polygon
              fill="#e53935"
              points="35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"
            ></polygon>
            <path
              fill="#c62828"
              d="M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"
            ></path>
            <path
              fill="#fbc02d"
              d="M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"
            ></path></svg
        ></a>
      </div>
      <div
        class="qualification"
        style="animation: 1s ease-out 0s 1 slideInLeftThird"
      >
        {% comment %} Qualification {% endcomment %}
        {{userdata.qualification}}<br />
        <a href="{{userdata.university_url}}" target="_blank" class="uni-btn"
          >{{userdata.university}}</a
        >
      </div>
      <div
        class="summary"
        style="animation: 1s ease-out 0s 1 slideInLeftFourth"
      >
        <p id="summaryInject"></p>
      </div>
    </div>
    {% else %}
    <div class="intro">
      <div class="name">
        <div class="first_name">{{userdata.first_name}}</div>
        <div class="last_name">{{userdata.last_name}}</div>
      </div>
      {% comment %} link to socials {% endcomment %}
      <div class="links">
        <a href="{{userdata.linkedin_url}}" target="_blank"
          ><img
            class="link-image"
            src="{% static 'photos/linkedin.png' %}"
            alt="linkedin"
        /></a>
        <a
          href="https://github.com/{{userdata.github_username}}"
          target="_blank"
          ><svg
            fill="#666666"
            xmlns="http://www.w3.org/2000/svg"
            data-name="Layer 1"
            viewBox="0 0 24 24"
            class="link-image git-svg"
            id="github"
          >
            <path
              d="M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"
            ></path></svg
        ></a>
        <a href="mailto:{{userdata.email_address}}"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            x="0px"
            y="0px"
            class="link-image"
            viewBox="0 0 48 48"
          >
            <path
              fill="#4caf50"
              d="M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"
            ></path>
            <path
              fill="#1e88e5"
              d="M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"
            ></path>
            <polygon
              fill="#e53935"
              points="35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"
            ></polygon>
            <path
              fill="#c62828"
              d="M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"
            ></path>
            <path
              fill="#fbc02d"
              d="M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"
            ></path></svg
        ></a>
      </div>
      <div class="qualification">
        {% comment %} Qualification {% endcomment %}
        {{userdata.qualification}}<br />
        <a href="{{userdata.university_url}}" target="_blank" class="uni-btn"
          >{{userdata.university}}</a
        >
      </div>
      <div class="summary">
        <p id="summaryInject"></p>
      </div>
    </div>
    {% endif %}
    <div class="picture-container">
      <div class="pic-container">
        <div
          class="profile-pic"
          style='
         background-image: url("/static/{{userdata.profile_pic}}");
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;

        '
        />
      </div>
    </div>
  </div>
</div>
<div class="item-box">
  <a href="{% url 'home_publications' %}">
    <div class="heading">publications</div></a
  >
  <div
    style="width: 100%; display: flex; align-items: center; margin-top: 20px"
  >
    <div id="publications">
      {% for publication in publications %}
      <div
        class="pCard paralell publ"
        onclick="decodeAbsBib('{{publication.id}}-abs-inner','{{publication.id}}-bib-inner','{{publication.abs}}','{{publication.bib}}')"
      >
        <div class="pCardLayout">
          <div class="pImageContainer">
            <div
              class="pImage"
              style="background-image: url('/static/{{publication.publication_image}}');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
         
          "
            ></div>
          </div>
          <div class="pInfo" style="width: 100%">
            <div class="pTitle" style="width: 100%">{{publication.title}}</div>
            <div class="pAuthors" style="width: 100%">
              {{publication.authors}}
            </div>
            <div class="publicationDesc" style="width: 100%">
              {{publication.description}}
            </div>
            <div
              class="links"
              style="gap: 5px; animation: 1s ease-out 0s 1 slideInLeftThird"
            >
              {% if publication.abs != "" %}
              <div
                class="link"
                onclick="toggleAttr('{{publication.id}}-abs','{{publication.id}}-bib')"
                style="cursor: pointer; font-size: 13px"
              >
                ABS
              </div>

              {% endif %} {% if publication.arxiv_url != "" %}
              <a
                class="link"
                href="{{publication.arxiv_url}}"
                style="font-size: 13px"
                target="_blank"
                >ARXIV</a
              >
              {% endif %} {% if publication.bib != "" %}
              <div
                class="link"
                onclick="toggleAttr('{{publication.id}}-bib','{{publication.id}}-abs')"
                style="cursor: pointer; font-size: 13px"
              >
                BIB
              </div>
              {% endif %}
              <a
                class="link"
                href="/static/{{publication.pdfFile}}"
                target="_blank"
                style="font-size: 13px"
                >pdf</a
              >
            </div>
          </div>
        </div>

        {% if publication.video and publication.video != "" %}
        <div
          class="publication_video_container"
          style="display: flex; flex-direction: column; align-items: center"
          onmouseenter="document.getElementById('{{publication.id}}-video').play()"
          onmouseleave="document.getElementById('{{publication.id}}-video').pause()"
        >
          <div
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              margin: 10px;
              font-size: 14px;
              gap: 5px;
            "
          >
            watch video<svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-fast-forward-fill"
              viewBox="0 0 16 16"
            >
              <path
                d="M7.596 7.304a.802.802 0 0 1 0 1.392l-6.363 3.692C.713 12.69 0 12.345 0 11.692V4.308c0-.653.713-.998 1.233-.696z"
              />
              <path
                d="M15.596 7.304a.802.802 0 0 1 0 1.392l-6.363 3.692C8.713 12.69 8 12.345 8 11.692V4.308c0-.653.713-.998 1.233-.696z"
              />
            </svg>
          </div>
          <video height="630" controls id="{{publication.id}}-video">
            <source src="/static/{{publication.video}}" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>
        {% endif %}
      </div>
      <div
        style="width: 100%"
        id="{{publication.id}}-abs"
        style="height: 0; overflow: hidden; transition: all 0.3s ease"
        hidden
      >
        <div class="abs" id="{{publication.id}}-abs-inner">
          {{publication.abs}}
        </div>
      </div>
      <div
        style="width: 100%"
        id="{{publication.id}}-bib"
        style="height: 0; overflow: hidden; transition: all 0.3s ease"
        hidden
      >
        <div class="bib">
          <code id="{{publication.id}}-bib-inner">{{publication.bib}}</code>
        </div>
      </div>

      {% if publication.doi != "" %}
      <div style="width: 100%">
        <span
          class="__dimensions_badge_embed__"
          data-doi="{{publication.doi}}"
          data-legend="hover-right"
          data-style="small_rectangle"
        ></span>
        <script
          async
          src="https://badge.dimensions.ai/badge.js"
          charset="utf-8"
        ></script>
      </div>
      {% endif %} {% endfor %}{% for article in gs_publications %}

      <div class="gs-container">
        <div class="gs-layout">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            x="0px"
            y="0px"
            width="100"
            height="100"
            viewBox="0 0 48 48"
          >
            <path
              fill="#1e88e5"
              d="M24,4C12.954,4,4,12.954,4,24s8.954,20,20,20s20-8.954,20-20S35.046,4,24,4z"
            ></path>
            <path
              fill="#1565c0"
              d="M35,16.592v-3.878L37,11H27l0.917,1.833c-1.236,0-2.265,0-2.265,0S19.095,13,19.095,18.748	c0,5.752,5.732,5.088,5.732,5.088s0,0.865,0,1.453c0,0.594,0.77,0.391,0.864,1.583c-0.388,0-7.964-0.208-7.964,4.998	s6.679,4.959,6.679,4.959s7.722,0.365,7.722-6.104c0-3.871-4.405-5.121-4.405-6.686c0-1.563,3.319-2.012,3.319-5.684	c0-0.823-0.028-1.524-0.149-2.12L34,13.571v3.02c-0.581,0.207-1,0.756-1,1.408v4.5c0,0.829,0.672,1.5,1.5,1.5s1.5-0.671,1.5-1.5V18	C36,17.348,35.581,16.799,35,16.592z M30.047,31.169c0.131,2.024-1.929,3.811-4.603,3.998c-2.671,0.188-4.946-1.295-5.077-3.316	c-0.133-2.016,1.927-3.805,4.6-3.996C27.641,27.667,29.914,29.152,30.047,31.169z M26.109,22.453	c-1.592,0.451-3.375-1.062-3.982-3.367c-0.604-2.312,0.195-4.543,1.786-4.992c1.593-0.453,3.374,1.059,3.981,3.367	C28.499,19.77,27.702,22.004,26.109,22.453z"
            ></path>
            <path
              fill="#e8eaf6"
              d="M34,16.592V12c0-0.051-0.015-0.097-0.029-0.143L35,11H21l-9,8h5.383	c0.174,5.466,5.715,4.836,5.715,4.836s0,0.865,0,1.453c0,0.594,0.771,0.391,0.865,1.583c-0.388,0-7.964-0.208-7.964,4.998	s6.679,4.959,6.679,4.959s7.721,0.365,7.721-6.104c0-3.871-4.404-5.121-4.404-6.686c0-1.563,3.318-2.012,3.318-5.684	c0-0.971-0.047-1.763-0.232-2.422L33,12.667v3.925c-0.581,0.207-1,0.756-1,1.408v4.5c0,0.829,0.672,1.5,1.5,1.5s1.5-0.671,1.5-1.5	V18C35,17.348,34.581,16.799,34,16.592z M28.319,31.169c0.131,2.024-1.928,3.811-4.602,3.998c-2.671,0.188-4.946-1.295-5.077-3.316	c-0.133-2.016,1.927-3.805,4.599-3.996C25.914,27.667,28.187,29.152,28.319,31.169z M24.38,22.453	c-1.591,0.451-3.373-1.062-3.981-3.367c-0.604-2.312,0.194-4.543,1.785-4.992c1.593-0.453,3.374,1.059,3.982,3.367	C26.77,19.77,25.973,22.004,24.38,22.453z"
            ></path>
          </svg>
          <div class="gs-textcont">
            <div class="gs-title">{{article.title}}</div>
            <div class="gs-authors">{{article.authors}}</div>
            <div class="gs-publication">{{article.publication}}</div>
            <div class="gs-options">
              {% if article.pdf and article.pdf != "" %}
              <a
                href="/static/{{article.pdf}}"
                target="_blank"
                class="gs-anchor"
                >pdf</a
              >
              <!-- prettier-ignore -->
              {% endif %}
              <a href="{{article.link}}" target="_blank" class="gs-anchor">
                go to google scholar</a
              >
            </div>
          </div>
        </div>
        {% if article.video and article.video != "" %}
        <div
          class="publication_video_container"
          style="display: flex; flex-direction: column; align-items: center"
          onmouseenter="document.getElementById('{{article.id}}-video').play()"
          onmouseleave="document.getElementById('{{article.id}}-video').pause()"
        >
          <div
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              margin: 10px;
              font-size: 14px;
              gap: 5px;
            "
          >
            watch video<svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-fast-forward-fill"
              viewBox="0 0 16 16"
            >
              <path
                d="M7.596 7.304a.802.802 0 0 1 0 1.392l-6.363 3.692C.713 12.69 0 12.345 0 11.692V4.308c0-.653.713-.998 1.233-.696z"
              />
              <path
                d="M15.596 7.304a.802.802 0 0 1 0 1.392l-6.363 3.692C8.713 12.69 8 12.345 8 11.692V4.308c0-.653.713-.998 1.233-.696z"
              />
            </svg>
          </div>
          <video height="630" controls id="{{article.id}}-video">
            <source src="/static/{{article.video}}" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% if showNews is True %}
<div class="item-box">
  <a href="{% url 'home_publications' %}"> <div class="heading">News</div></a>
  <div
    style="width: 100%; display: flex; align-items: center; margin-top: 20px"
  >
    <div id="publications">
      {% for new in news|slice:":3" %}
      <a
        class="news-card"
        id="{{new.id}}-container"
        href="{% url 'home_news_more' new.id %}"
      >
        <div class="news-container">
          <div class="news-left">
            <div
              style="background-image:url('/static/{{new.image}}');
        background-size:cover; background-position:center; width:  130px; height:130px;
        border-radius: 5px;
        "
              alt="news image"
            ></div>
          </div>
          <div class="news-right">
            <div class="news-text-wrap">
              <div class="news-text-content">{{new.title}}</div>
              <div class="news-time">
                {{new.news_date}} - {{new.getTimeDiff}} ago
              </div>
              <div class="news-desc">
                {{new.news_description|slice:":250"}}
                <!-- prettier-ignore -->
                {% if new.news_description|length > 250 %}...{% endif %}
              </div>
            </div>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</div>
{% endif %}
<div class="item-box">
  <a href="{% url 'home_repos' %}"> <div class="heading">Repositories</div></a>
  <div
    style="
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
    "
  >
    <div id="repos">
      <div
        style="
          width: 100%;
          min-height: 60vh;
          display: flex;
          justify-content: center;
          align-items: center;
        "
      >
        <div class="spinner">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const decodeAbsBib = (absId, bibId, abs, bib) => {
    var decodedBib = decodeHtml(bib);
    var decodedAbs = decodeHtml(abs);
    document.getElementById(absId).innerHTML = decodedAbs;
    document.getElementById(bibId).innerHTML = decodedBib;
  };
  var elems = document.getElementsByClassName("news-desc");
  Array.prototype.forEach.call(elems, function (el) {
    el.innerHTML = decodeHtml(el.innerHTML);
  });

  const mode = localStorage.getItem("mode");
  if (mode == "light") {
    switchToLight();
  }

  function toggleMode() {
    const mode = localStorage.getItem("mode");
    if (mode === "light") {
      localStorage.setItem("mode", "dark");
      switchToDark();
    } else {
      localStorage.setItem("mode", "light");
      switchToLight();
    }
  }
  function switchToLight() {
    var outer = document.getElementById("outer_css");
    var href = outer.href.split("/");
    var file_name = href.pop();
    href.push("lightmode");
    href.push(file_name);
    href = href.join("/");
    outer.href = href;
  }
  function switchToDark() {
    var outer = document.getElementById("outer_css");
    var href = outer.href.split("/");
    var file_name = href.pop();
    href.pop();
    href.push(file_name);
    href = href.join("/");
    outer.href = href;
  }
  var summary = `{{userdata.summary}}`;
  summary = decodeHtml(summary);
  var summaryContainer = document.getElementById("summaryInject");
  summaryContainer.innerHTML = summary;
  var selectedRepos = `{{repos}}`;
  selectedRepos = selectedRepos.split(",");
  var db_gitlab_repo_ids = "{{gitlab_repos}}";
  if (db_gitlab_repo_ids != "") {
    db_gitlab_repo_ids = db_gitlab_repo_ids.split(",");
  }
  var elements = document.getElementsByClassName("publ");
  Array.prototype.forEach.call(elements, function (el) {
    el.click();
  });

  var injectionString = "";
  if ("{{gitlab_id}}" != "") {
    fetch(
      "https://gitlab.com/api/v4/users/{{gitlab_id}}/projects?private_token={{api_key}}"
    )
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
        data.forEach((repo) => {
          if (!db_gitlab_repo_ids.includes(repo.id.toString())) {
            return;
          }
          if (repo.star_count != 0 || repo.forks_count != 0) {
            injectionString += `<a target="_blank" href="${
              repo.web_url
            }" class = "ppAnchor">
    <div class="lab-cont">
    <div class="lab-title-cont"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#e2432a" class="bi bi-gitlab" viewBox="0 0 16 16">
  <path d="m15.734 6.1-.022-.058L13.534.358a.57.57 0 0 0-.563-.356.6.6 0 0 0-.328.122.6.6 0 0 0-.193.294l-1.47 4.499H5.025l-1.47-4.5A.572.572 0 0 0 2.47.358L.289 6.04l-.022.057A4.044 4.044 0 0 0 1.61 10.77l.007.006.02.014 3.318 2.485 1.64 1.242 1 .755a.67.67 0 0 0 .814 0l1-.755 1.64-1.242 3.338-2.5.009-.007a4.05 4.05 0 0 0 1.34-4.668Z"/>
</svg>${repo.path_with_namespace}</div>
    <div class="lab-description">${repo.description}</div>
    <div class="lab-stats">
      ${
        repo.forks_count != 0
          ? `
    <div class="forks"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
  <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.56.56 0 0 0-.163-.505L1.71 6.745l4.052-.576a.53.53 0 0 0 .393-.288L8 2.223l1.847 3.658a.53.53 0 0 0 .393.288l4.052.575-2.906 2.77a.56.56 0 0 0-.163.506l.694 3.957-3.686-1.894a.5.5 0 0 0-.461 0z"/>
</svg>repo.forks_count</div>`
          : ""
      }
${
  repo.star_count != 0
    ? `
    <div class="stars"><svg xmlns="http://www.w3.org/2000/svg" width="12px" height="12px" viewBox="0 0 24 24" fill="none"><circle cx="6" cy="6" r="3" fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/><circle cx="18" cy="6" r="3" fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/><circle cx="12" cy="18" r="3" fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/><path stroke="white" stroke-width="2" d="M6 9v1a2 2 0 0 0 2 2h4m6-3v1a2 2 0 0 1-2 2h-4m0 0v3"/></svg>${repo.star_count}</div>
    `
    : ""
}</div>
    </div></a>`;
          } else {
            injectionString += `<a target="_blank" href="${repo.web_url}" class = "ppAnchor">
    <div class="lab-cont" >
    <div class="lab-title-cont"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#e2432a" class="bi bi-gitlab" viewBox="0 0 16 16">
  <path d="m15.734 6.1-.022-.058L13.534.358a.57.57 0 0 0-.563-.356.6.6 0 0 0-.328.122.6.6 0 0 0-.193.294l-1.47 4.499H5.025l-1.47-4.5A.572.572 0 0 0 2.47.358L.289 6.04l-.022.057A4.044 4.044 0 0 0 1.61 10.77l.007.006.02.014 3.318 2.485 1.64 1.242 1 .755a.67.67 0 0 0 .814 0l1-.755 1.64-1.242 3.338-2.5.009-.007a4.05 4.05 0 0 0 1.34-4.668Z"/>
</svg>${repo.path_with_namespace}</div>
    <div class="lab-description">${repo.description}</div>
    </div></a>`;
          }
        });
        fetch("https://api.github.com/users/{{userdata.github_username}}/repos")
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            var repos = document.getElementById("repos");
            data.forEach((repo) => {
              if (selectedRepos.includes(repo.id.toString())) {
                injectionString += `<a target="_blank" href="${repo.html_url}" class = "ppAnchor"><img src="https://github-readme-stats.vercel.app/api/pin/?username={{userdata.github_username}}&repo=${repo.name}&theme=dark&show_owner=true" alt="repo logo" class="repo-logo" style="height:fit-content;cursor:pointer" /></a>`;
              }
            });
            repos.innerHTML = injectionString;
          });
      });
  } else {
    fetch("https://api.github.com/users/{{userdata.github_username}}/repos")
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
        var repos = document.getElementById("repos");
        data.forEach((repo) => {
          if (selectedRepos.includes(repo.id.toString())) {
            injectionString += `<a target="_blank" href="${repo.html_url}" class = "ppAnchor"><img src="https://github-readme-stats.vercel.app/api/pin/?username={{userdata.github_username}}&repo=${repo.name}&theme=dark&show_owner=true" alt="repo logo" class="repo-logo" style="height:fit-content;cursor:pointer" /></a>`;
          }
        });
        repos.innerHTML = injectionString;
      });
  }
  function decodeHtml(html) {
    var txt = document.createElement("textarea");
    txt.innerHTML = html;
    return txt.value;
  }
  const toggleAttr = (showElem, hideElem) => {
    if (document.getElementById(showElem).hidden) {
      showAttr(showElem, hideElem);
    } else {
      document.getElementById(showElem).hidden = true;
      document.getElementById(showElem).style.height = 0;
    }
  };
  const showAttr = (showElem, hideElem) => {
    document.getElementById(hideElem).hidden = true;
    document.getElementById(showElem).hidden = false;
    setTimeout(() => {
      document.getElementById(showElem).style.height = 100;
    }, 1);

    document.getElementById(hideElem).style.height = 0;
  };
</script>
{% endblock %}
